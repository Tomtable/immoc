<!doctype>
<html>
<head>
	<title>Promise animation</title>
	<style type="text/css">
		.ball {
			width: 40px;
			height: 40px;
			border-radius: 20px;
		}
		.ball1 {
			background: red;
		}
		.ball2 {
			background: yellow;
		}
		.ball3 {
			background: green;
		}
	</style>

	</head>
	<body>
		<div class="ball ball1" style="margin-left: 0;"></div>
		<div class="ball ball2" style="margin-left: 0;"></div>
		<div class="ball ball3" style="margin-left: 0;"></div>
		<script>
		document.write('1')
		var ball1= document.querySelector('.ball1')
		var ball2= document.querySelector('.ball2')
		var ball3= document.querySelector('.ball3')

		function animate (ball, distance, cb) {
			setTimeout(function() {
				var marginLeft = parseInt(ball.style.marginLeft, 10)
				
				if (marginLeft === distance){
					cb && cb()
					}
				else{
					if (marginLeft < distance){
						marginLeft ++
					}
					else{
						marginLeft --
					}
					ball.style.marginLeft = marginLeft + 'px'
					animate(ball, distance, cb)
				}
			}, 13)
		}
		animate(ball1, 400, function () {
		})
		</script>
	</body>
</html>